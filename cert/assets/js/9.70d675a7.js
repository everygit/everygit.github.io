(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{361:function(t,a,e){"use strict";e.r(a);var s=e(42),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"创建根证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建根证书"}},[t._v("#")]),t._v(" 创建根证书")]),t._v(" "),e("p",[t._v("在这里我们要利用前面的私钥和证书请求来创建根证书")]),t._v(" "),e("h2",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[t._v("#")]),t._v(" 命令")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("openssl x509 -req \n    -days "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("7300")]),t._v(" \n    -sha256\n    -in ca2.csr \n    -signkey ca.key\n    -extensions v3_ca \n    -out ca.crt\n    -extfile ca.cnf\n")])])]),e("table",[e("thead",[e("tr",[e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("描述")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("x509")]),t._v(" "),e("td",[t._v("生成x509格式证书")])]),t._v(" "),e("tr",[e("td",[t._v("-req")]),t._v(" "),e("td",[t._v("输入csr文件")])]),t._v(" "),e("tr",[e("td",[t._v("-days")]),t._v(" "),e("td",[t._v("证书的有效期（天）")])]),t._v(" "),e("tr",[e("td",[t._v("-sha256")]),t._v(" "),e("td",[t._v("证书摘要采用sha256算法")])]),t._v(" "),e("tr",[e("td",[t._v("-extensions")]),t._v(" "),e("td",[t._v("按照配置文件中配置的v3_ca项添加扩展")])]),t._v(" "),e("tr",[e("td",[t._v("-signkey")]),t._v(" "),e("td",[t._v("签发证书的私钥")])]),t._v(" "),e("tr",[e("td",[t._v("-in")]),t._v(" "),e("td",[t._v("要输入的csr文件")])]),t._v(" "),e("tr",[e("td",[t._v("-out")]),t._v(" "),e("td",[t._v("输出的cer证书文件")])]),t._v(" "),e("tr",[e("td",[t._v("-extfile")]),t._v(" "),e("td",[t._v("配置文件")])])])]),t._v(" "),e("p",[t._v("需要验证私钥的密码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("Signature ok\nsubject=/C=CN/ST=JiangSu/L=SuZhou/O=MyComponent/OU=MyComponent Zuzhi/CN=MyComponent Root CA/emailAddress=test@test.com\nGetting Private key\nEnter pass phrase for ca.key:123123\n")])])]),e("h2",{attrs:{id:"证书内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#证书内容"}},[t._v("#")]),t._v(" 证书内容")]),t._v(" "),e("p",[t._v("证书内容，实际内容比这个长")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("-----BEGIN CERTIFICATE-----\nMIIDmDCCAoACCQCqK8tNlYju7DANBgkqhkiG9w0BAQsFADCBjTELMAkGA1UEBhMC\nQ04xEDAOBgNVBAgMB0ppYW5nU3UxDzANBgNVBAcMBlN1WmhvdTERMA8GA1UECgwI\nemzI6lB2OIotO765S2+03qUXk0/yKldPB2n1okKqdRmDdRkLx27cD7Y0fdncVhCI\nKA1VXW0CkerNpdNhcZa2qq1ezyWCinATrN9B7ZYDO5v18rrvpxmExmpc4EITGCdD\nF8ZgI552Y4emaju1wCfcAWRvKI1mrMvcxHWoOOB9h2ZaaGlJfBpig8dREPXYecYD\nvR78Oxjslw5k39We\n-----END CERTIFICATE-----\n")])])]),e("h2",{attrs:{id:"验证证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#验证证书"}},[t._v("#")]),t._v(" 验证证书")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("openssl x509 -text -noout -in ca.crt\n")])])]),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[ v3_ca ]\n# Extensions for a typical CA (`man x509v3_config`).\nsubjectKeyIdentifier = hash\nauthorityKeyIdentifier = keyid:always,issuer\nbasicConstraints = critical, CA:true\nkeyUsage = critical, digitalSignature, cRLSign, keyCertSign\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);