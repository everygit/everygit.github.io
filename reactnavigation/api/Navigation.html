<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Navigation prop 参考 | react navigation 5.x</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="试试">
    
    <link rel="preload" href="/reactnavigation/assets/css/0.styles.c084512d.css" as="style"><link rel="preload" href="/reactnavigation/assets/js/app.06c5ad1f.js" as="script"><link rel="preload" href="/reactnavigation/assets/js/2.1931d008.js" as="script"><link rel="preload" href="/reactnavigation/assets/js/30.089ad555.js" as="script"><link rel="preload" href="/reactnavigation/assets/js/6.2a89f9f8.js" as="script"><link rel="prefetch" href="/reactnavigation/assets/js/10.55a310bb.js"><link rel="prefetch" href="/reactnavigation/assets/js/11.449a3349.js"><link rel="prefetch" href="/reactnavigation/assets/js/12.24a1d69e.js"><link rel="prefetch" href="/reactnavigation/assets/js/13.2965d5a8.js"><link rel="prefetch" href="/reactnavigation/assets/js/14.bfd37c2e.js"><link rel="prefetch" href="/reactnavigation/assets/js/15.68ab63f5.js"><link rel="prefetch" href="/reactnavigation/assets/js/16.0f72e130.js"><link rel="prefetch" href="/reactnavigation/assets/js/17.16594635.js"><link rel="prefetch" href="/reactnavigation/assets/js/18.dca2d259.js"><link rel="prefetch" href="/reactnavigation/assets/js/19.905865f4.js"><link rel="prefetch" href="/reactnavigation/assets/js/20.a342ac55.js"><link rel="prefetch" href="/reactnavigation/assets/js/21.eb7d985e.js"><link rel="prefetch" href="/reactnavigation/assets/js/22.b0a31519.js"><link rel="prefetch" href="/reactnavigation/assets/js/23.a857375c.js"><link rel="prefetch" href="/reactnavigation/assets/js/24.c422b0dd.js"><link rel="prefetch" href="/reactnavigation/assets/js/25.403cbf65.js"><link rel="prefetch" href="/reactnavigation/assets/js/26.d0c2f3cb.js"><link rel="prefetch" href="/reactnavigation/assets/js/27.de7e9625.js"><link rel="prefetch" href="/reactnavigation/assets/js/28.1f56c73d.js"><link rel="prefetch" href="/reactnavigation/assets/js/29.332a2e1d.js"><link rel="prefetch" href="/reactnavigation/assets/js/3.949cae60.js"><link rel="prefetch" href="/reactnavigation/assets/js/31.a9c7faf7.js"><link rel="prefetch" href="/reactnavigation/assets/js/32.be1711e2.js"><link rel="prefetch" href="/reactnavigation/assets/js/33.be19c74b.js"><link rel="prefetch" href="/reactnavigation/assets/js/34.d95a8dc0.js"><link rel="prefetch" href="/reactnavigation/assets/js/35.509ef6d2.js"><link rel="prefetch" href="/reactnavigation/assets/js/36.fdfcc2eb.js"><link rel="prefetch" href="/reactnavigation/assets/js/37.a21729c7.js"><link rel="prefetch" href="/reactnavigation/assets/js/38.82468988.js"><link rel="prefetch" href="/reactnavigation/assets/js/39.d0b2ed34.js"><link rel="prefetch" href="/reactnavigation/assets/js/4.67058592.js"><link rel="prefetch" href="/reactnavigation/assets/js/40.be1d77fd.js"><link rel="prefetch" href="/reactnavigation/assets/js/41.d6c76715.js"><link rel="prefetch" href="/reactnavigation/assets/js/42.400b9afe.js"><link rel="prefetch" href="/reactnavigation/assets/js/43.c787c282.js"><link rel="prefetch" href="/reactnavigation/assets/js/44.eed57f85.js"><link rel="prefetch" href="/reactnavigation/assets/js/45.86cb221d.js"><link rel="prefetch" href="/reactnavigation/assets/js/46.e238f601.js"><link rel="prefetch" href="/reactnavigation/assets/js/47.67b39a5f.js"><link rel="prefetch" href="/reactnavigation/assets/js/48.155a4369.js"><link rel="prefetch" href="/reactnavigation/assets/js/49.048d93be.js"><link rel="prefetch" href="/reactnavigation/assets/js/5.9d839219.js"><link rel="prefetch" href="/reactnavigation/assets/js/50.e5b2601f.js"><link rel="prefetch" href="/reactnavigation/assets/js/51.caba7691.js"><link rel="prefetch" href="/reactnavigation/assets/js/52.e9dbf56a.js"><link rel="prefetch" href="/reactnavigation/assets/js/53.0b284ab0.js"><link rel="prefetch" href="/reactnavigation/assets/js/54.3f286670.js"><link rel="prefetch" href="/reactnavigation/assets/js/55.2b5c3b06.js"><link rel="prefetch" href="/reactnavigation/assets/js/56.9d8ebc8c.js"><link rel="prefetch" href="/reactnavigation/assets/js/57.45da38ac.js"><link rel="prefetch" href="/reactnavigation/assets/js/58.4ff7663f.js"><link rel="prefetch" href="/reactnavigation/assets/js/59.da6ed64f.js"><link rel="prefetch" href="/reactnavigation/assets/js/60.49c01b37.js"><link rel="prefetch" href="/reactnavigation/assets/js/61.0168ffd9.js"><link rel="prefetch" href="/reactnavigation/assets/js/62.7c9f892e.js"><link rel="prefetch" href="/reactnavigation/assets/js/63.2bb4f99e.js"><link rel="prefetch" href="/reactnavigation/assets/js/64.f8334968.js"><link rel="prefetch" href="/reactnavigation/assets/js/65.875ba9b5.js"><link rel="prefetch" href="/reactnavigation/assets/js/66.db24112d.js"><link rel="prefetch" href="/reactnavigation/assets/js/67.380ff58e.js"><link rel="prefetch" href="/reactnavigation/assets/js/68.50e28dee.js"><link rel="prefetch" href="/reactnavigation/assets/js/69.7f06bdfd.js"><link rel="prefetch" href="/reactnavigation/assets/js/7.3f495a3d.js"><link rel="prefetch" href="/reactnavigation/assets/js/70.9daf0f06.js"><link rel="prefetch" href="/reactnavigation/assets/js/71.80bbb0b5.js"><link rel="prefetch" href="/reactnavigation/assets/js/72.87246514.js"><link rel="prefetch" href="/reactnavigation/assets/js/73.6ea4022e.js"><link rel="prefetch" href="/reactnavigation/assets/js/74.f49f9057.js"><link rel="prefetch" href="/reactnavigation/assets/js/75.789d766a.js"><link rel="prefetch" href="/reactnavigation/assets/js/76.39b71742.js"><link rel="prefetch" href="/reactnavigation/assets/js/77.d37139df.js"><link rel="prefetch" href="/reactnavigation/assets/js/78.2feb8e59.js"><link rel="prefetch" href="/reactnavigation/assets/js/79.44352ab5.js"><link rel="prefetch" href="/reactnavigation/assets/js/8.f9689e81.js"><link rel="prefetch" href="/reactnavigation/assets/js/80.1cd42d15.js"><link rel="prefetch" href="/reactnavigation/assets/js/81.4c1b00d5.js"><link rel="prefetch" href="/reactnavigation/assets/js/82.034d86b2.js"><link rel="prefetch" href="/reactnavigation/assets/js/83.cc905ec6.js"><link rel="prefetch" href="/reactnavigation/assets/js/84.b164ea9e.js"><link rel="prefetch" href="/reactnavigation/assets/js/85.ed310ba9.js"><link rel="prefetch" href="/reactnavigation/assets/js/86.28034a60.js"><link rel="prefetch" href="/reactnavigation/assets/js/9.55c01fa0.js">
    <link rel="stylesheet" href="/reactnavigation/assets/css/0.styles.c084512d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reactnavigation/" class="home-link router-link-active"><!----> <span class="site-name">react navigation 5.x</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://reactnavigation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://reactnavigation.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  官网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>指南</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>API 参考</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reactnavigation/api/Container.html" class="sidebar-link">NavigationContainer</a></li><li><a href="/reactnavigation/api/ServerContainer.html" class="sidebar-link">ServerContainer</a></li><li><a href="/reactnavigation/api/Screen.html" class="sidebar-link">Screen</a></li><li><a href="/reactnavigation/api/Optionsforscreens.html" class="sidebar-link">Options for screens</a></li><li><a href="/reactnavigation/api/routeprop.html" class="sidebar-link">route prop 参考</a></li><li><a href="/reactnavigation/api/Navigation.html" aria-current="page" class="active sidebar-link">Navigation prop 参考</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#依赖于导航器的功能" class="sidebar-link">依赖于导航器的功能</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#通用-api-参考" class="sidebar-link">通用 API 参考</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#navigate" class="sidebar-link">navigate</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#goback" class="sidebar-link">goBack</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#reset" class="sidebar-link">reset</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#setparams" class="sidebar-link">setParams</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#setoptions" class="sidebar-link">setOptions</a></li></ul></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#navigation-events" class="sidebar-link">Navigation events</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#isfocused" class="sidebar-link">isFocused</a></li></ul></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#高级-api-参考" class="sidebar-link">高级 API 参考</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#dispatch" class="sidebar-link">dispatch</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#dangerouslygetparent" class="sidebar-link">dangerouslyGetParent</a></li><li class="sidebar-sub-header"><a href="/reactnavigation/api/Navigation.html#dangerouslygetstate" class="sidebar-link">dangerouslyGetState</a></li></ul></li></ul></li><li><a href="/reactnavigation/api/NavigationContext.html" class="sidebar-link">NavigationContext</a></li><li><a href="/reactnavigation/api/events.html" class="sidebar-link">Navigation events</a></li><li><a href="/reactnavigation/api/state.html" class="sidebar-link">Navigation state 参考</a></li><li><a href="/reactnavigation/api/link.html" class="sidebar-link">Link</a></li><li><a href="/reactnavigation/api/Developer.html" class="sidebar-link">开发者工具</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Navigators</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Hooks</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Actions</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>custom</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>其他资源</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Meta</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="navigation-prop-参考"><a href="#navigation-prop-参考" class="header-anchor">#</a> Navigation prop 参考</h1> <p>应用中的每个 <code>screen</code> 组件都会自动提供 <code>navigation</code> prop。该道具包含各种便利功能，可调度导航动作。看起来像这样：</p> <ul><li><code>navigation</code> <ul><li><code>navigate</code> -转到另一个屏幕，找出需要执行的操作</li> <li><code>reset</code> -清除导航器状态并用新路由替换</li> <li><code>goBack</code> -关闭活动屏幕并移回堆栈</li> <li><code>setParams</code> -更改路由的参数</li> <li><code>dispatch</code> -发送动作对象以更新导航状态</li> <li><code>setOptions</code> -更新屏幕的选项</li> <li><code>isFocused</code> -检查屏幕是否聚焦</li> <li><code>addListener</code> -订阅来自导航器的事件更新</li></ul></li></ul> <p>最重要的事情是 <code>navigation</code> prop 没有传递到所有组件中。只有屏幕组件会自动收到此 prop ！ React Navigation 在这里没有任何作用。例如，如果要定义 <code>MyBackButton</code> 组件并将其渲染为屏幕组件的子级，则将无法访问其 <code>navigation</code> prop。但是，如果您希望访问任何组件中的 <code>navigation</code> prop，则可以使用 <code>useNavigation</code> hook。</p> <div class="st-quote" style="border-color:#FCB700;background-color:#FEF7CD;"><p>只能在 <code>useEffect</code> / <code>useLayoutEffect</code> / <code>componentDidMount</code> / <code>componentDidUpdate</code> 等中调用 <code>setParams</code> / <code>setOptions</code> 等。在渲染过程中或在构造函数中请勿调用。</p></div> <h2 id="依赖于导航器的功能"><a href="#依赖于导航器的功能" class="header-anchor">#</a> 依赖于导航器的功能</h2> <p>根据当前导航器的类型，<code>navigation</code> prop 上还存在其他几个功能。</p> <p>如果导航器是堆栈导航器，则提供了几种 <code>navigate</code> 和 <code>goBack</code> 选项，您可以使用任意一个。 这些功能是：</p> <ul><li><code>navigation</code> <ul><li><code>replace</code> - 用新路径替换当前路径</li> <li><code>push</code> - 将新路由推入堆栈</li> <li><code>pop</code> - 返回堆栈</li> <li><code>popToTop</code>- 转到栈顶</li></ul></li></ul> <p>如果导航器是选项卡导航器，则还可以使用以下选项：</p> <ul><li><code>navigation</code> <ul><li><code>jumpTo</code>- 转到标签导航器中的特定屏幕</li></ul></li></ul> <p>如果导航器是抽屉式导航器，则还可以使用以下内容：</p> <ul><li><code>navigation</code> <ul><li><code>jumpTo</code> - 进入抽屉式导航器中的特定屏幕</li> <li><code>openDrawer</code> - 打开抽屉</li> <li><code>closeDrawer</code> - 关闭抽屉</li> <li><code>toggleDrawer</code> - 切换状态，即。 从关闭切换到打开，反之亦然</li></ul></li></ul> <p>您可以在所使用的导航器的文档中找到有关导航器相关功能的更多详细信息。</p> <h2 id="通用-api-参考"><a href="#通用-api-参考" class="header-anchor">#</a> 通用 API 参考</h2> <p>您与 <code>navigation</code> prop 的绝大多数交互都将涉及 <code>navigate</code>，<code>goBack</code> 和 <code>setParams</code>。</p> <h3 id="navigate"><a href="#navigate" class="header-anchor">#</a> <code>navigate</code></h3> <p><code>navigate</code> 方法使我们可以导航到您应用中的另一个屏幕。它采用以下参数：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>name</code> - 已在某处定义的路由的目的地名称</li> <li><code>params</code> - 合并到目标路由的参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">HomeScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation<span class="token operator">:</span> <span class="token punctuation">{</span> navigate <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>This is the home screen <span class="token keyword">of</span> the app<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button
        onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;Profile&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> names<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;Brent&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Satya&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Michaś&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        title<span class="token operator">=</span><span class="token string">&quot;Go to Brent's profile&quot;</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 <a href="https://reactnavigation.org/docs/stack-navigator/" target="_blank" rel="noopener noreferrer">堆栈导航器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中，使用屏幕名称调用 <code>navigate</code> 会导致不同的行为，具体取决于屏幕是否存在。如果该屏幕已存在于堆栈的历史记录中，它将返回该屏幕并在此之后删除所有屏幕。如果屏幕不存在，它将推送一个新屏幕。</p> <p>例如，如果您有一个堆栈，其中包含历史记录 <code>Home &gt; Profile &gt; Settings</code>，并调用 <code>navigate(Profile)</code>，则返回 <code>Profile</code> 并移除 <code>Settings</code> 屏幕时，结果屏幕将为 <code>Home &gt; Profile</code>。</p> <p>默认情况下，屏幕由其名称标识。但是，您也可以使用 <code>getId</code> prop 对其进行自定义，以将这些参数考虑在内。</p> <p>例如，假设您为 <code>Profile</code> 屏幕指定了 <code>getId</code> prop：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Screen
  name<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span>
  component<span class="token operator">=</span><span class="token punctuation">{</span>ProfileScreen<span class="token punctuation">}</span>
  getId<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> params<span class="token punctuation">.</span>userId<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>现在，如果您有一个历史记录为 <code>Home &gt; Profile (userId: bob) &gt; Settings</code> 的堆栈，并调用 <code>navigate(Profile, { userId: 'alice' })</code>，则结果屏幕将为 <code>Home &gt; Profile (userId: bob) &gt; Settings &gt; Profile (userId: alice)</code>，因为它将添加一个新的 <code>Profile</code> 屏幕，因为找不到匹配的屏幕。</p> <h3 id="goback"><a href="#goback" class="header-anchor">#</a> goBack</h3> <p>使用 <code>goBack</code> 方法，我们可以返回到导航器中的上一个屏幕。</p> <p>默认情况下，goBack 将从调用它的屏幕返回：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ProfileScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation<span class="token operator">:</span> <span class="token punctuation">{</span> goBack <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">&quot;Go back from ProfileScreen&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="从特定屏幕返回"><a href="#从特定屏幕返回" class="header-anchor">#</a> 从特定屏幕返回</h4> <p>考虑以下导航堆栈历史记录：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token constant">SCREEN</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">SCREEN_KEY_A</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token constant">SCREEN</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">SCREEN_KEY_B</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token constant">SCREEN</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">SCREEN_KEY_C</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token constant">SCREEN</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token constant">SCREEN_KEY_D</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在您在屏幕 D 上，并想返回屏幕 A（弹出 D，C 和 B）。 然后，您可以使用 <code>navigate</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span> key<span class="token operator">:</span> <span class="token constant">SCREEN_KEY_A</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// will go to screen A FROM screen D</span>
</code></pre></div><p>另外，由于屏幕 A 是堆栈的顶部，因此可以使用 <code>navigation.popToTop()</code>。</p> <h3 id="reset"><a href="#reset" class="header-anchor">#</a> reset</h3> <p>通过 <code>reset</code> 方法，我们可以将导航器状态替换为新状态：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  index<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Profile&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 <code>reset</code> 中指定的状态对象将现有的导航状态 <code>reset</code> 为新的 <a href="https://reactnavigation.org/docs/navigation-state/" target="_blank" rel="noopener noreferrer">导航状态<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，即删除现有屏幕并添加新的屏幕。如果要在更改状态时保留现有屏幕，则可以将 <code>CommonActions.reset</code> 与 <code>dispatch</code> 一起使用。</p> <div class="st-quote" style="border-color:#FCB700;background-color:#FEF7CD;"><p>注意：考虑到导航器的状态对象是内部的，并且在次要版本中可能会发生更改。除非确实需要，否则请避免使用导航状态对象中的属性（ <code>index</code> 和 <code>routes</code> 除外）。如果有某些功能不能不依靠状态对象的结构来实现，请提出一个问题。</p></div> <h3 id="setparams"><a href="#setparams" class="header-anchor">#</a> setParams</h3> <p><code>setParams</code> 方法使我们可以更新当前屏幕的参数（<code>route.params</code>）。 <code>setParams</code> 的工作方式类似于 React 的 <code>setState</code> -将提供的 <code>params</code> 对象与当前 <code>params</code> 合并。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ProfileScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation<span class="token operator">:</span> <span class="token punctuation">{</span> setParams <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Button
        onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token function">setParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            friends<span class="token operator">:</span>
              route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>friends<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Brent'</span>
                <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token string">'Wojciech'</span><span class="token punctuation">,</span> <span class="token string">'Szymon'</span><span class="token punctuation">,</span> <span class="token string">'Jakub'</span><span class="token punctuation">]</span>
                <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Brent'</span><span class="token punctuation">,</span> <span class="token string">'Satya'</span><span class="token punctuation">,</span> <span class="token string">'Michaś'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            title<span class="token operator">:</span>
              route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>title <span class="token operator">===</span> <span class="token string">&quot;Brent's Profile&quot;</span>
                <span class="token operator">?</span> <span class="token string">&quot;Lucy's Profile&quot;</span>
                <span class="token operator">:</span> <span class="token string">&quot;Brent's Profile&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        title<span class="token operator">=</span><span class="token string">&quot;Swap title and friends&quot;</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="setoptions"><a href="#setoptions" class="header-anchor">#</a> setOptions</h3> <p>通过 <code>setOptions</code> 方法，我们可以从组件内部设置屏幕选项。如果我们需要使用组件的 prop，状态或上下文来配置屏幕，这将非常有用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">ProfileScreen</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation<span class="token punctuation">,</span> route <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>value<span class="token punctuation">,</span> onChangeText<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>

  React<span class="token punctuation">.</span><span class="token function">useLayoutEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    navigation<span class="token punctuation">.</span><span class="token function">setOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> value <span class="token operator">===</span> <span class="token string">&quot;&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;No title&quot;</span> <span class="token operator">:</span> value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>navigation<span class="token punctuation">,</span> value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> flex<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> alignItems<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> justifyContent<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>TextInput
        style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token operator">:</span> <span class="token number">40</span><span class="token punctuation">,</span> borderColor<span class="token operator">:</span> <span class="token string">&quot;gray&quot;</span><span class="token punctuation">,</span> borderWidth<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        onChangeText<span class="token operator">=</span><span class="token punctuation">{</span>onChangeText<span class="token punctuation">}</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Button title<span class="token operator">=</span><span class="token string">&quot;Go back&quot;</span> onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> navigation<span class="token punctuation">.</span><span class="token function">goBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此处指定的所有选项都会与定义屏幕时指定的选项进行浅合并。</p> <h2 id="navigation-events"><a href="#navigation-events" class="header-anchor">#</a> Navigation events</h2> <p>屏幕可以使用 <code>addListener</code> 方法在 <code>navigation</code> prop 上添加侦听器。例如，监听 <code>focus</code> 事件：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> navigation <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> navigation<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">&quot;focus&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> unsubscribe<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>navigation<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token operator">&lt;</span>ProfileContent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>有关可用事件和 API 用法的更多详细信息，请参见 <a href="https://reactnavigation.org/docs/navigation-events" target="_blank" rel="noopener noreferrer">导航事件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="isfocused"><a href="#isfocused" class="header-anchor">#</a> <code>isFocused</code></h3> <p>此方法使我们可以检查屏幕当前是否处于聚焦状态。 如果屏幕已聚焦，则返回 <code>true</code>，否则返回 <code>false</code>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> isFocused <span class="token operator">=</span> navigation<span class="token punctuation">.</span><span class="token function">isFocused</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>值更改时，此方法不会重新渲染屏幕，并且主要在回调中有用。 您可能要使用 <code>useIsFocused</code> 而不是直接使用它，它将返回一个布尔值 prop 来指示屏幕是否聚焦。</p> <h2 id="高级-api-参考"><a href="#高级-api-参考" class="header-anchor">#</a> 高级 API 参考</h2> <p><code>dispatch</code> 功能很少使用，但是如果您无法使用 <code>navigate</code>，<code>goBack</code> 等可用方法执行所需的操作，则可以使用。除非绝对必要，否则我们建议避免使用 <code>dispatch</code> 方法。</p> <h3 id="dispatch"><a href="#dispatch" class="header-anchor">#</a> <code>dispatch</code></h3> <p>使用 <code>dispatch</code> 方法，我们可以发送一个导航操作对象，该对象确定如何更新导航状态。所有导航功能（例如 <code>navigate</code>）都在后台使用 <code>dispatch</code>。</p> <blockquote><p>请注意，如果要分派动作，则应使用此库中提供的动作创建者，而不是直接编写动作对象。</p></blockquote> <p>有关可用操作的完整列表，请参见 <a href="https://reactnavigation.org/docs/navigation-actions" target="_blank" rel="noopener noreferrer">导航操作文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CommonActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@react-navigation/native&quot;</span><span class="token punctuation">;</span>

navigation<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>
  CommonActions<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;Profile&quot;</span><span class="token punctuation">,</span>
    params<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>调度动作对象时，还可以指定一些其他属性：</p> <ul><li><code>source</code> - 路径的关键字，应将其视为操作的来源。例如，<code>replace</code> 操作将用给定的键替换路由。默认情况下，它将使用调度操作的路由的键。您可以显式传递 <code>undefined</code> 来覆盖此行为。</li> <li><code>target</code> - 应对其执行操作的导航状态的键。默认情况下，如果导航器未处理，则动作会冒泡到其他导航器。如果指定了 <code>target</code>，则导航键相同的导航器没有处理该操作时，该操作不会冒泡。</li></ul> <p>例子：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CommonActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@react-navigation/native&quot;</span><span class="token punctuation">;</span>

navigation<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>CommonActions<span class="token punctuation">.</span><span class="token function">navigate</span><span class="token punctuation">(</span><span class="token string">&quot;Profile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  source<span class="token operator">:</span> <span class="token string">&quot;someRoutekey&quot;</span><span class="token punctuation">,</span>
  target<span class="token operator">:</span> <span class="token string">&quot;someStatekey&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="自定义动作创建者"><a href="#自定义动作创建者" class="header-anchor">#</a> 自定义动作创建者</h4> <p>也可以传递动作创建者函数进行 <code>dispatch</code>。该函数将接收当前状态，并需要返回一个导航操作对象以使用：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CommonActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@react-navigation/native&quot;</span><span class="token punctuation">;</span>

navigation<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Add the home route to the start of the stack</span>
  <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Home&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> CommonActions<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>state<span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
    index<span class="token operator">:</span> routes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以使用此功能来构建自己的帮助程序，以在应用程序中使用。这是一个实现在最后一个屏幕之前插入屏幕的示例：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> CommonActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@react-navigation/native&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">insertBeforeLast</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">routeName<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> routeName<span class="token punctuation">,</span> params <span class="token punctuation">}</span><span class="token punctuation">,</span>
    state<span class="token punctuation">.</span>routes<span class="token punctuation">[</span>state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> CommonActions<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>state<span class="token punctuation">,</span>
    routes<span class="token punctuation">,</span>
    index<span class="token operator">:</span> routes<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然后像这样使用它：</p> <div class="language-js extra-class"><pre class="language-js"><code>navigation<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">insertBeforeLast</span><span class="token punctuation">(</span><span class="token string">&quot;Home&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="dangerouslygetparent"><a href="#dangerouslygetparent" class="header-anchor">#</a> dangerouslyGetParent</h3> <p>此方法从嵌套当前导航器的父导航器返回 <code>navigation</code> prop。例如，如果您有一个堆栈导航器和一个嵌套在堆栈中的选项卡导航器，则可以在选项卡导航器的屏幕内使用<code>dangerouslyGetParent</code> 来获取 从堆栈导航器传递的 <code>navigation</code> prop。</p> <p>如果没有父级导航器，则此方法将返回 <code>undefined</code>。 使用此方法时，请务必始终检查 <code>undefined</code> 的内容。</p> <h3 id="dangerouslygetstate"><a href="#dangerouslygetstate" class="header-anchor">#</a> dangerouslyGetState</h3> <div class="st-quote" style="border-color:#FCB700;background-color:#FEF7CD;"><p>注意：认为导航器的状态对象是内部的，并且在次要版本中可能会发生更改。 除非确实需要，否则请避免使用导航状态对象中的属性（ <code>index</code> 和 <code>route</code> 除外）。 如果有某些功能不能不依靠状态对象的结构来实现，请提出一个问题。</p></div> <p>此方法返回包含屏幕的导航器的状态对象。 在极少数情况下，获取导航器状态可能很有用。 您很可能不需要使用此方法。 如果这样做，请确保您有充分的理由。</p> <p>如果需要状态来呈现内容，则应使用 <code>useNavigationState</code> 而不是此方法。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/reactnavigation/api/routeprop.html" class="prev">
        route prop 参考
      </a></span> <span class="next"><a href="/reactnavigation/api/NavigationContext.html">
        NavigationContext
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/reactnavigation/assets/js/app.06c5ad1f.js" defer></script><script src="/reactnavigation/assets/js/2.1931d008.js" defer></script><script src="/reactnavigation/assets/js/30.089ad555.js" defer></script><script src="/reactnavigation/assets/js/6.2a89f9f8.js" defer></script>
  </body>
</html>
